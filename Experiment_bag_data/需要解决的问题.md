## 获取轨迹
使用 roslaunch water_swarm sph_experiment.launch获取轨迹，轨迹自动获取，存储在config文件夹中


## 绘制地图
1. 使用 roslaunch so3_quadrotor_simulator run_rviz.launch 启动rviz
2. 使用 rosrun map_generator click_map 启动地图绘制，需要绘制和环境1：1的地图
3. 使用 rosrun map_generator map_recorder 存储地图为.pcd格式的文件
4. 将文件存入/home/uav/water_swarm/src/uav_simulator/dynamic_map_generator/resource 路径下，命名为experiment.pcd

## 路径点发布
使用 rosrun target_publisher publish_target，目前已经集成在launch中

## 无人机连接
1. 使用ssh连接无人机 ssh vslam@10.42.0.2
2. 关闭启动的进程 
3. 将本地文件传输至无人机  
    scp -r /home/uav/water_swarm/src/uav_simulator/Utils/uav_server vslam@10.42.0.2:/home/vslam/traj_ws/src
4. 配置/卸载开机自动启动

    配置开机自启动
    rosrun robot_upstart install --interface lo --user root --setup /home/vslam/traj_ws/devel/setup.bash seeker_utils/launch/seeker_v1.launch

    rosrun robot_upstart install --interface lo --user root --setup /home/vslam/traj_ws/devel/setup.bash seeker_utils/launch/vins.launch

    rosrun robot_upstart install --interface lo --user root --setup /home/vslam/traj_ws/devel/setup.bash seeker_utils/launch/uav_server.launch

    卸载开机自启动
    rosrun robot_upstart uninstall seeker

    sudo systemctl daemon-reload && sudo systemctl start uav

    reboot之前需要执行指令sync防止文件损坏
5. 遥控器
    
    （1）通道说明

    （2）观察飞控板下面的绿灯，长亮表示已经连接遥控器，反之没有连接；如果高频闪烁，给飞机重新上电

    （3）遥控器重新对频：反复插拔电池直到底下的绿灯进入双闪模式，之后捅一下遥控器上的BIND按钮

    （4）遥控器通道映射（从1开始计数）： 
                    油门：  65 ( 低——>高        174   ——> 1811        )
                    YAW:   66 ( 左——>右        65496 ——> 40          )
                    PITCH: 67 ( 高——>低        40    ——> 65496       )
                    ROLL:  68 ( 左——>右        40    ——> 65496       )
                    SA:    69 ( 未按下——>按下   191   ——> 1792        )
                    SB:    70 ( 低——>中——>高   191 ——> 997 ——> 1792  )
                    SC:    71 ( 低——>中——>高   191 ——> 997 ——> 1792  )
                    SD:    72 ( 未按下——>按下   191   ——> 1792        )

    （5）起飞：按下SA解锁，等待螺旋桨旋转然后直接推油门； SD是定点/定高切换，按下去为定点，不按下去为定高；
             SB是对应：最下面是manual，中间是定点/定高，最上面是offboard 

     (6) 进入offboard模式：
                    SB 高位， SD 按下，解锁即可进入offboard模式，此时可以直接给定轨迹飞行。
                    SC 低位：进入执行轨迹模式；SC高位：降落并上锁


## 目前还存在的问题

    1.需要记录每次飞行的轨迹
    2.轨迹启动的时候很长，明确切换状态延迟的原因(check代码)

    3.轨迹会出现抖动，tracking的时候会有急停
    4.起飞的时候yaw角会旋转，需要明确问题的解决
    5.响应mavlink上锁的指令

## 理论问题
    1.增加保证不会导致粒子穿透的理论部分
    2.粒子群任意形变的保证
    3.如果reviewer质疑轨迹跟踪效果不好怎么回复